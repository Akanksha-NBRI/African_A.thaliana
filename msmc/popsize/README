MSMC2: The Final Estimation
Starring: Bruce Willis
Data source: VCFs and masks from Andrea's pipeline.

Folders:

data/ => contains all data files duh
data/andrea_vcfs/ #.vcf.gz => single sample tabix'd and bgzipped vcfs from andrea's pipeline. 
data/masks/ #.mask => masks from andrea's pipeline (symlinks)
data/merged_vcfs/ #x#.vcf => merged vcfs of samples to run in MSMC. Used to create the MSMC input. Created with vcf-merge.
data/msmc_input/ #x#.Chr?.txt => input files for MSMC. Number of files is 5*number of comparisons
data/w_m.txt => within Morocco regions. File containing sample combinations for MSMC results. For use in graphing and data preparation. AUTOMATICALLY GENERATED by scripts/misc/generate_results_list.py
data/w_i.txt => within Iberia groups.
data/w_w.txt => within Worldwide groups.
data/b_m_r.txt => between Morocco regions.
data/b_i_g.txt => between Iberia groups.
data/b_m_i.txt => between Morocco and Iberia.
data/b_m_w.txt => between Morocco and worldwide.
data/all_samples.txt => a list of all the samples included in the analysis. 

results/ => results from MSMC. Flat folder with all results inside
results/ #x#.final.txt => output straight from MSMC
results/ #x#.popsize.txt => graphable output with popsize and times.

scripts/ => all the scripts for these analyses. 
scripts/graphing/ => python scripts for graphing
scripts/msmc/ => 
scripts/msmc/msmc.sh => runs msmc on a single comparison
scripts/msmc/run_msmc.sh => runs msmc on comparisons specified (all pairs in msmc_input)
scripts/preprocessing/ => 
scripts/preprocessing/prepare_vcf.sh => Prepares Andrea's VCFs for merging. Needs to be run on all samples.
scripts/preprocessing/run_prepare_vcf.sh => Runs prepare_vcf.sh on all files in data/andrea_vcfs/.
scripts/preprocessing/merge_vcf.sh => Will merge two VCFs and output into data/merged_vcfs. NOT gzipped.
scripts/preprocessing/run_merge_vcf.sh => Will make the correct mergings based on what's in data/w_m.txt etc
scripts/preprocessing/symlink_masks.sh => Creates a symbolic link in the data/masks folder
scripts/preprocessing/run_symlink_masks.sh => Creates all symlinks for files we want
scripts/preprocessing/msmc_gen.py => already written. Takes VCFs and masks and creates MSMC input files. May need to edit this to control where the output goes.
scripts/preprocessing/run_msmc_gen.sh => need to write. Will run msmc_gen.py on all files specified in ??? (this script?).
scripts/misc/ => helper scripts
scripts/misc/generate_results_list.py => generates the data/w_m.txt (and so on) files. 
scripts/postprocessing/ => 
scripts/postprocessing/get_popsize.py => returns to stdout population size estimates
scripts/postprocessing/run_get_popsize.py => runs get_popsize.py on everything in the results directory.

Steps from the beginning:

1) run preprocessing/run_prepare_vcf.sh to gather all of the vcfs and prepare them for merging (data/andrea_vcfs)
2) run preprocessing/run_merge_vcf.sh to get all the merged VCFs I need

For single samples:

1) run preprocessing/prepare_vcf.sh <path to vcf> -m or -o (if the name is in morocco or other format). This will put a tabix and gzipped vcf in data/andrea_vcfs
2) merge_vcf.sh <sample number 1> <sample number 2>. This will result in a merged vcf in data/merged_vcfs

